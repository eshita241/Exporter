(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[60],{365:(e,t,a)=>{Promise.resolve().then(a.bind(a,2475))},2475:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var l=a(5155),s=a(2115);function r(){let[e,t]=(0,s.useState)([]),[a,r]=(0,s.useState)({name:"",unit:"",description:"",quantity:0}),[i,n]=(0,s.useState)(!0),[d,c]=(0,s.useState)(!1),[o,u]=(0,s.useState)({id:"",value:"0"}),[x,m]=(0,s.useState)(null),[p,h]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/raw-materials");if(!e.ok)throw Error("Failed to fetch materials");let a=await e.json();t(a)}catch(e){console.error("Error fetching materials:",e),m("Failed to load materials")}finally{n(!1)}})()},[]);let b=async()=>{if(!a.name||!a.unit)return void alert("Name and unit are required");c(!0),m(null);try{let l=await fetch("/api/raw-materials",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,quantity:a.quantity||0})});if(!l.ok){let e=await l.json();throw Error(e.error||"Failed to add material")}let s=await l.json();t([...e,s]),r({name:"",unit:"",description:"",quantity:0})}catch(e){console.error("Error:",e),alert(e instanceof Error?e.message:"Failed to add material")}finally{c(!1)}},g=async a=>{if(!o.value||isNaN(Number(o.value)))return void m("Please enter a valid quantity");try{let l=await fetch("/api/raw-materials/quantity",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({materialId:a,quantity:Number(o.value),action:"set"})});if(!l.ok){let e=await l.json();throw Error(e.error||"Failed to update quantity")}let s=await l.json();t(e.map(e=>e.id===s.id?s:e)),u({id:"",value:"0"}),h("Quantity updated successfully!"),setTimeout(()=>h(null),3e3)}catch(e){console.error("Error:",e),m(e instanceof Error?e.message:"Failed to update quantity")}};return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsx)("header",{className:"fixed top-0 left-0 right-0 bg-white shadow-sm z-10",children:(0,l.jsx)("div",{className:"px-4 py-4",children:(0,l.jsx)("h1",{className:"text-xl font-bold text-blue-700",children:"Raw Materials RMFPL"})})}),(0,l.jsxs)("main",{className:"pt-16 px-4 pb-6 max-w-lg mx-auto",children:[x&&(0,l.jsx)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-lg mb-4 mt-2",children:(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("svg",{className:"h-5 w-5 text-red-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,l.jsx)("span",{children:x})]})}),p&&(0,l.jsx)("div",{className:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-lg mb-4 mt-2",children:(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("svg",{className:"h-5 w-5 text-green-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,l.jsx)("span",{children:p})]})}),(0,l.jsxs)("div",{className:"bg-white shadow rounded-lg p-5 mt-4",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-black mb-4",children:"Add New Raw Material"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name*"}),(0,l.jsx)("input",{type:"text",placeholder:"Enter material name",className:"w-full border rounded-lg p-3 text-black focus:ring-blue-500 focus:border-blue-500",value:a.name,onChange:e=>r({...a,name:e.target.value}),required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit* (kg, g, etc.)"}),(0,l.jsx)("input",{type:"text",placeholder:"Enter unit of measurement",className:"w-full border rounded-lg p-3 text-black focus:ring-blue-500 focus:border-blue-500",value:a.unit,onChange:e=>r({...a,unit:e.target.value}),required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Initial Quantity"}),(0,l.jsx)("input",{type:"number",min:"0",step:"0.01",placeholder:"Enter initial quantity",className:"w-full border rounded-lg p-3 text-black focus:ring-blue-500 focus:border-blue-500",value:a.quantity,onChange:e=>r({...a,quantity:parseFloat(e.target.value)||0})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),(0,l.jsx)("input",{type:"text",placeholder:"Enter description",className:"w-full border rounded-lg p-3 text-black focus:ring-blue-500 focus:border-blue-500",value:a.description,onChange:e=>r({...a,description:e.target.value})})]}),(0,l.jsx)("button",{onClick:b,disabled:d,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:d?(0,l.jsxs)("div",{className:"flex justify-center items-center",children:[(0,l.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding..."]}):"Add Material"})]})]}),(0,l.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden mt-6",children:[(0,l.jsx)("div",{className:"px-4 py-3 border-b",children:(0,l.jsx)("h2",{className:"font-semibold text-gray-800",children:"Existing Raw Materials"})}),i?(0,l.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 text-black border-blue-500"})}):0===e.length?(0,l.jsx)("div",{className:"p-6 text-center text-gray-500",children:"No raw materials found"}):(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-900 uppercase tracking-wider",children:"Name"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-900 uppercase tracking-wider",children:"Unit"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-900 uppercase tracking-wider",children:"Current Qty"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-900 uppercase tracking-wider",children:"Update Qty"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-900 uppercase tracking-wider hidden sm:table-cell",children:"Description"})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-gray-200 text-black",children:e.map(e=>(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:e.name}),(0,l.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:e.unit}),(0,l.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:e.quantity}),(0,l.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:o.id===e.id?(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("input",{type:"number",min:"0",step:"0.01",className:"w-20 border rounded p-1",value:o.value,onChange:t=>u({id:e.id,value:t.target.value})}),(0,l.jsx)("button",{onClick:()=>g(e.id),className:"bg-blue-500 text-white px-2 py-1 rounded text-sm",children:"Save"}),(0,l.jsx)("button",{onClick:()=>u({id:"",value:"0"}),className:"bg-gray-500 text-white px-2 py-1 rounded text-sm",children:"Cancel"})]}):(0,l.jsx)("button",{onClick:()=>u({id:e.id,value:e.quantity.toString()}),className:"bg-green-500 text-white px-2 py-1 rounded text-sm",children:"Update"})}),(0,l.jsx)("td",{className:"px-4 py-3 whitespace-nowrap hidden sm:table-cell",children:e.description||"-"})]},e.id))})]})})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(365)),_N_E=e.O()}]);