(()=>{var e={};e.id=418,e.ids=[418],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3367:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>x,routeModule:()=>c,serverHooks:()=>h,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>l});var s={};r.r(s),r.d(s,{POST:()=>p});var a=r(6559),n=r(8088),i=r(7719),o=r(2190);let u=new(r(6330)).PrismaClient;async function p(e){try{let{batchData:t}=await e.json();if(!t||!Array.isArray(t)||0===t.length)return o.NextResponse.json({error:"Invalid batch data format"},{status:400});let r=new Date;r.setUTCHours(0,0,0,0);let s=await u.$transaction(async e=>{let s=[];for(let a of t){let t,{skuId:n,batches:i,date:o}=a;if(!n||"number"!=typeof i||i<=0)continue;let u=o?new Date(o):r;u.setUTCHours(0,0,0,0);let p=await e.dailyBatch.findUnique({where:{skuId_date:{skuId:n,date:u}}});t=p?await e.dailyBatch.update({where:{id:p.id},data:{batches:i}}):await e.dailyBatch.create({data:{skuId:n,batches:i,date:u}}),s.push(t)}return s});return o.NextResponse.json({message:"Batches saved successfully",data:s},{status:200})}catch(e){return console.error("Error saving batches:",e),o.NextResponse.json({error:"Failed to save batches"},{status:500})}}let c=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/batches/route",pathname:"/api/batches",filename:"route",bundlePath:"app/api/batches/route"},resolvedPagePath:"C:\\Users\\eshit\\Desktop\\projects\\exporter\\app\\api\\batches\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:d,workUnitAsyncStorage:l,serverHooks:h}=c;function x(){return(0,i.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:l})}},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6330:e=>{"use strict";e.exports=require("@prisma/client")},6487:()=>{},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,580],()=>r(3367));module.exports=s})();