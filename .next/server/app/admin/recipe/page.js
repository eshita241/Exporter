(()=>{var e={};e.id=833,e.ids=[833],e.modules={166:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\eshit\\\\Desktop\\\\projects\\\\exporter\\\\app\\\\admin\\\\recipe\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\eshit\\Desktop\\projects\\exporter\\app\\admin\\recipe\\page.tsx","default")},536:()=>{},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1736:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(687),i=r(3210);function a(){let[e,t]=(0,i.useState)([]),[r,a]=(0,i.useState)([]),[n,l]=(0,i.useState)(""),[d,o]=(0,i.useState)([]),[c,p]=(0,i.useState)(!0),[m,u]=(0,i.useState)(null),[h,x]=(0,i.useState)(!1),[b,f]=(0,i.useState)(null),[v,g]=(0,i.useState)(""),[y,j]=(0,i.useState)(""),w=async e=>{if(e.preventDefault(),!n||!v||!y)return void u("All fields are required");try{x(!0),u(null);let e=await fetch("/api/recipes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({skuId:n,rawMaterialId:v,quantity:parseFloat(y)})});if(!e.ok)throw Error(`Failed to add recipe item: ${e.status}`);let t=await fetch(`/api/recipes?skuId=${n}`),r=await t.json();o(r),g(""),j(""),f("Recipe item added successfully"),setTimeout(()=>f(null),3e3)}catch(e){console.error("Failed to add recipe item:",e),u("Failed to add recipe item. Please try again.")}finally{x(!1)}},N=async e=>{if(confirm("Are you sure you want to delete this ingredient from the recipe?"))try{p(!0);let t=await fetch(`/api/recipes?skuId=${n}&rawMaterialId=${e}`,{method:"DELETE"});if(!t.ok)throw Error(`Failed to delete recipe item: ${t.status}`);o(d.filter(t=>t.rawMaterialId!==e)),f("Recipe item deleted successfully"),setTimeout(()=>f(null),3e3)}catch(e){console.error("Failed to delete recipe item:",e),u("Failed to delete recipe item. Please try again.")}finally{p(!1)}};return c&&0===e.length?(0,s.jsxs)("div",{className:"container mx-auto p-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Recipe Management"}),(0,s.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})})]}):(0,s.jsxs)("div",{className:"container mx-auto p-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Recipe Management"}),m&&(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:m}),b&&(0,s.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:b}),0===e.length?(0,s.jsx)("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded",children:"No SKUs found. Please add SKUs in the admin section first."}):(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"Select SKU:"}),(0,s.jsx)("select",{className:"w-full p-2 border bg-white text-gray-900 rounded-md focus:border-blue-500 focus:outline-none",value:n,onChange:e=>{l(e.target.value),g(""),j("")},children:e.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))})]}),(0,s.jsxs)("div",{className:" shadow-md rounded-lg overflow-hidden",children:[(0,s.jsxs)("h2",{className:" px-6 py-3 text-lg font-semibold border-b",children:["Recipe for ",e.find(e=>e.id===n)?.name||""]}),c?(0,s.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-blue-500"})}):0===d.length?(0,s.jsx)("div",{className:"p-6 text-gray-500 italic",children:"No ingredients added to this recipe yet."}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:" divide-y divide-gray-200",children:d.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"font-medium",children:e.rawMaterial.name})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.quantity}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.rawMaterial.unit}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("button",{onClick:()=>N(e.rawMaterialId),className:"text-red-600 hover:text-red-900",children:"Delete"})})]},e.id))})]})})]})]}),(0,s.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4 text-black",children:"Add Ingredient"}),(0,s.jsxs)("form",{onSubmit:w,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Raw Material:"}),(0,s.jsxs)("select",{className:"w-full p-2 border rounded-md focus:border-blue-500 text-black focus:outline-none",value:v,onChange:e=>g(e.target.value),required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select a raw material"}),r.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," (",e.unit,")"]},e.id))]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Quantity:"}),(0,s.jsx)("input",{type:"number",min:"0",step:"0.0001",className:"w-full p-2 border rounded-md text-black focus:border-blue-500 focus:outline-none",value:y,onChange:e=>j(e.target.value),required:!0,placeholder:"Enter quantity"})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{type:"submit",disabled:h,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${h?"opacity-50 cursor-not-allowed":""}`,children:h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding..."]}):"Add to Recipe"})})]})]})]})]})}},2704:()=>{},2952:(e,t,r)=>{Promise.resolve().then(r.bind(r,166))},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4421:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6444,23)),Promise.resolve().then(r.t.bind(r,6042,23)),Promise.resolve().then(r.t.bind(r,8170,23)),Promise.resolve().then(r.t.bind(r,9477,23)),Promise.resolve().then(r.t.bind(r,9345,23)),Promise.resolve().then(r.t.bind(r,2089,23)),Promise.resolve().then(r.t.bind(r,6577,23)),Promise.resolve().then(r.t.bind(r,1307,23))},6055:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(1658);let i=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},6277:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6346,23)),Promise.resolve().then(r.t.bind(r,7924,23)),Promise.resolve().then(r.t.bind(r,5656,23)),Promise.resolve().then(r.t.bind(r,99,23)),Promise.resolve().then(r.t.bind(r,8243,23)),Promise.resolve().then(r.t.bind(r,8827,23)),Promise.resolve().then(r.t.bind(r,2763,23)),Promise.resolve().then(r.t.bind(r,7173,23))},6504:(e,t,r)=>{Promise.resolve().then(r.bind(r,1736))},7384:()=>{},8014:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>d});var s=r(7413),i=r(260),a=r.n(i),n=r(3298),l=r.n(n);r(2704);let d={title:"Create Next App",description:"Generated by create next app"};function o({children:e}){return(0,s.jsx)("html",{lang:"en",className:"scroll-smooth",children:(0,s.jsx)("body",{className:`${a().variable} ${l().variable} antialiased`,children:e})})}},8901:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>o});var s=r(5239),i=r(8088),a=r(8170),n=r.n(a),l=r(893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(t,d);let o={children:["",{children:["admin",{children:["recipe",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,166)),"C:\\Users\\eshit\\Desktop\\projects\\exporter\\app\\admin\\recipe\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,8014)),"C:\\Users\\eshit\\Desktop\\projects\\exporter\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\eshit\\Desktop\\projects\\exporter\\app\\admin\\recipe\\page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/admin/recipe/page",pathname:"/admin/recipe",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,423,658],()=>r(8901));module.exports=s})();